<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KPS</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body style="background-color: lightgrey;">
    <!--Navigation bar-->
    <nav class="navbar">
        <div class="navbar_container">
            <a href="#home" id="navbar_logo">KPS</a>
            <div class="navbar_toggle" id="menu">
                <span class="bar"></span>
                <span class="bar"></span>
            </div>
            <ul class="navbar_menu">
                <li class="navbar_item">
                    <a href="#livegame" class="navbar_links" id="livegame-page">Livepeli</a>
                </li>
                <li class="navbar_item">
                    <a href="#history" class="navbar_links" id="history-page">Historia</a>
                </li>
            </ul>
        </div>
    </nav>

    <!--Live game-->
    <div style="text-align: center; margin-top: 2em;">
        <h1>Käynnissä oleva ottelu:</h1></div>
    <div style="float: left; margin-top: 20px; margin-left: 20%;">
        <h2>Pelaaja 1:</h2></div>
    <div style="float: right; margin-top: 20px; margin-right: 20%;">
        <h2>Pelaaja 2:</h2></div>
    
    <br style="clear:both" />

    <div style="float: left;">
        <img id="kivi_vasen" 
        src="/images/kivi_vasen.png" 
        alt="Kivi vasemmalta"
        width="450"></div>
    <div style="float: right;">
        <img id="kivi_oikea" 
        src="/images/kivi_oikea.png" 
        alt="Kivi oikealta"
        width="450"></div>

    <br style="clear:both" />

    <!--Game history-->
    <div style="text-align: center; margin-top: 20px; margin-bottom: 10px;">
        <h1>Pelihistoria:</h1></div>
        
    <input type="text" 
        id="searchBar" 
        onkeyup="search()" 
        placeholder="Etsi pelaajia nimellä...">

    <br style="clear:both" />

    <ul id="listaPeleistä">
        <li><a>Untamo Korhonen</a></li>
        <li><a>Tapio Korhonen</a></li>
        <li><a>Vellamo Laine</a></li>
        <li><a>Sampo Jokinen</a></li>
        <li><a>Aino Hämäläinen</a></li>
        <li><a>Kokko Järvinen</a></li>
    </ul>

    <script>

        //Fetch data from API function
        const history_api = "https://bad-api-assignment.reaktor.com/rps/history"
        const livegame_api = "https://bad-api-assignment.reaktor.com/rps/live"
        
        async function getData(url) {
            const response = await fetch(url);
            const data = await response.json();
            console.log(data);
        }

        //Searchbar function
        function search() {
            var input, filter, ul, li, a, i, txtValue;
            input = document.getElementById('searchBar');
            filter = input.value.toUpperCase();
            ul = document.getElementById("listaPeleistä");
            li = ul.getElementsByTagName('li');

            //Iterate through list, hide those who don't match the search
            for (i=0; i<li.length;i++) {
                a = li[i].getElementsByTagName("a")[0];
                txtValue = a.textContent || a.innerText;
                if (txtValue.toLocaleUpperCase().indexOf(filter) > -1) {
                    li[i].style.display = "";
                } else {
                    li[i].style.display = "none";
                }
            }
        }

        getData(history_api);

    </script>
</body>
</html>